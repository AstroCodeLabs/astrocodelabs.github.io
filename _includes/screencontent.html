<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

{%- comment -%}
If the page sets `screenshot` in front matter, show it immediately.
We still allow videos (below) to override and hide the image, same as before.
{%- endcomment -%}
{%- if page.screenshot -%}
<script>
  $(function() {
    $(".iphoneScreen")
      .attr('src', '{{ page.screenshot | relative_url }}')
      .removeClass("hidden");
    console.log("page.screenshot: {{ page.screenshot }}");
  });
</script>
{%- endif -%}

{%- for file in site.static_files -%}
  {%- if file.path contains 'assets/screenshot/' -%}
    {%- unless page.screenshot -%}
      <script>
        $(function() {
          $(".iphoneScreen").attr('src', '{{ site.github.baseurl }}{{ file.path }}');
          $(".iphoneScreen").removeClass("hidden");
          console.log("auto screenshot: {{ file.path }}");
        });
      </script>
    {%- endunless -%}
  {%- elsif file.path contains 'assets/videos/' -%}
    {%- unless file.path contains 'assets/videos/Place-video-files-here.txt' -%}
      <script>
        $(function() {
          $(".iphoneScreen").addClass("hidden");
          console.log("remove screenshot");
        });
      </script>
    {%- endunless -%}
    {%- if file.extname == ".mov" or file.extname == ".mp4" -%}
      <script>
        $(function() {
          $(".videoContainer").removeClass("hidden");
          $(".screenvideo").append('<source src="{{ site.github.baseurl }}{{ file.path }}" type="video/mp4">');
          console.log("video: {{ file.path }}");
        });
      </script>
    {%- elsif file.extname == ".ogg" -%}
      <script>
        $(function() {
          $(".videoContainer").removeClass("hidden");
          $(".screenvideo").append('<source src="{{ site.github.baseurl }}{{ file.path }}" type="video/ogg">');
          console.log("video: {{ file.path }}");
        });
      </script>
    {%- elsif file.extname == ".webm" -%}
      <script>
        $(function() {
          $(".videoContainer").removeClass("hidden");
          $(".screenvideo").append('<source src="{{ site.github.baseurl }}{{ file.path }}" type="video/webm">');
          console.log("video: {{ file.path }}");
        });
      </script>
    {%- endif -%}
  {%- endif -%}
{%- endfor -%}
